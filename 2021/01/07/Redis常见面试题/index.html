<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Redis常见面试题"><meta name="keywords" content="Redis"><meta name="author" content="惊羽"><meta name="copyright" content="惊羽"><title>Redis常见面试题 | 惊羽的博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">前言说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E7%89%87%E9%9B%86%E7%BE%A4%E9%97%AE%E9%A2%98"><span class="toc-number"></span> <span class="toc-text">分片集群问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Redis%E7%9A%84%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%9C%BA%E5%88%B6%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91"><span class="toc-number">0.1.</span> <span class="toc-text">1.Redis的多数据机制了解多少</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%87%82Redis%E7%9A%84%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E5%90%97"><span class="toc-number">0.2.</span> <span class="toc-text">2.懂Redis的批量操作吗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Redis%E7%9A%84%E9%9B%86%E7%BE%A4%E6%9C%BA%E5%88%B6%E4%B8%AD-%E4%BD%A0%E8%A7%89%E5%BE%97%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E8%B6%B3%E7%9A%84%E5%9C%B0%E6%96%B9%E5%90%97"><span class="toc-number">0.3.</span> <span class="toc-text">3.Redis的集群机制中, 你觉得有什么不足的地方吗?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9C%A8Redis%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F%E4%B8%8B-%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">0.4.</span> <span class="toc-text">4.在Redis集群模式下, 如何进行批量操作?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E4%BB%80%E4%B9%88%E6%98%AFRedis%E7%9A%84%E4%BA%8B%E5%8A%A1"><span class="toc-number">0.5.</span> <span class="toc-text">4.5 什么是Redis的事务</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98"><span class="toc-number"></span> <span class="toc-text">其它问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">0.1.</span> <span class="toc-text">5.什么是缓存穿透,如何解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">0.2.</span> <span class="toc-text">6.什么是缓存击穿,如何解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">0.3.</span> <span class="toc-text">7.什么是缓存雪崩 ,如何解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Redis%E4%B8%AD%E7%9A%84Key%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1"><span class="toc-number">0.4.</span> <span class="toc-text">8.Redis中的Key如何设计?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%BA%E4%BB%80%E4%B9%88Redis%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-number">0.5.</span> <span class="toc-text">9.为什么Redis是单线程的?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E4%B8%BA%E4%BB%80%E4%B9%88Redis%E7%9A%84%E6%80%A7%E8%83%BD%E5%BE%88%E9%AB%98"><span class="toc-number">0.6.</span> <span class="toc-text">10.为什么Redis的性能很高?</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">惊羽</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">21</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">15</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">7</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/post/code.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">惊羽的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Redis常见面试题</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-07</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/">面试准备</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="前言说明"><a href="#前言说明" class="headerlink" title="前言说明"></a>前言说明</h2><p>学习和整理 Redis 相关的知识当中，这里汇总了一下经常被问到的 Redis 面试题</p>
<p>Redis 的八股无外乎这三个：缓存穿透、缓存击穿、缓存雪崩。</p>
<h1 id="分片集群问题"><a href="#分片集群问题" class="headerlink" title="分片集群问题"></a>分片集群问题</h1><h3 id="1-Redis的多数据机制了解多少"><a href="#1-Redis的多数据机制了解多少" class="headerlink" title="1.Redis的多数据机制了解多少"></a>1.Redis的多数据机制了解多少</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>Redis支持多个数据库,单机模式下有从db0到db15, 数据库之间不能共享</span><br><span class="line"><span class="number">2.</span>分片集群中只有一个数据库空间,不会使用到Redis的多数据库</span><br></pre></td></tr></table></figure>

<h3 id="2-懂Redis的批量操作吗"><a href="#2-懂Redis的批量操作吗" class="headerlink" title="2.懂Redis的批量操作吗"></a>2.懂Redis的批量操作吗</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>有mget,mset,hmget,hmset,hgetall,hvals,</span><br><span class="line"><span class="number">2.</span>分片集群中, 不同的key会分到不同的slot中, 不能直接使用mget,mset</span><br><span class="line">如何解决: 加上相同的前缀,用大括号&#123;&#125;包裹</span><br></pre></td></tr></table></figure>

<h3 id="3-Redis的集群机制中-你觉得有什么不足的地方吗"><a href="#3-Redis的集群机制中-你觉得有什么不足的地方吗" class="headerlink" title="3.Redis的集群机制中, 你觉得有什么不足的地方吗?"></a>3.Redis的集群机制中, 你觉得有什么不足的地方吗?</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>如果<span class="keyword">value</span>是hash类型, 对象非常大, 即对应属性非常多, 也只能存入一个集群的节点中</span><br><span class="line"><span class="number">2.</span>批量操作也很麻烦, 属性太多写得很长</span><br></pre></td></tr></table></figure>

<h3 id="4-在Redis集群模式下-如何进行批量操作"><a href="#4-在Redis集群模式下-如何进行批量操作" class="headerlink" title="4.在Redis集群模式下, 如何进行批量操作?"></a>4.在Redis集群模式下, 如何进行批量操作?</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>如何执行的key数量很少, 串行<span class="keyword">get</span>操作</span><br><span class="line"><span class="number">2.</span>如果一定要批量操作, 加上相同的前缀,前缀用&#123;&#125;包裹</span><br></pre></td></tr></table></figure>

<h3 id="4-5-什么是Redis的事务"><a href="#4-5-什么是Redis的事务" class="headerlink" title="4.5 什么是Redis的事务"></a>4.5 什么是Redis的事务</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>Redis事务是一些命令的集合, 执行的时候是串行执行</span><br><span class="line"><span class="number">2.</span>分片集群中,不同的key可能会被分到不同的slot中, Redis的事务不生效</span><br><span class="line"><span class="number">3.</span>Redis的事务不支持回滚操作, 基本用不上.</span><br></pre></td></tr></table></figure>

<h1 id="其它问题"><a href="#其它问题" class="headerlink" title="其它问题"></a>其它问题</h1><h3 id="5-什么是缓存穿透-如何解决"><a href="#5-什么是缓存穿透-如何解决" class="headerlink" title="5.什么是缓存穿透,如何解决"></a>5.什么是缓存穿透,如何解决</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">现象：</span><br><span class="line">客户端高并发不断向Redis请求一个不存在的Key，MySQL中也没有</span><br><span class="line">由于Redis没有，导致这个并发全部落在MySQL上</span><br><span class="line"></span><br><span class="line">解决</span><br><span class="line"><span class="number">1.</span>对于那些每秒访问频次过高的IP进行限制，拒绝访问</span><br><span class="line"><span class="number">2.</span>如果第一次redis中没有，读MYSQL，MySQL也没有，在Redis中设置一个<span class="operator">=</span><span class="operator">=</span>临时<span class="operator">=</span><span class="operator">=</span>默认值</span><br><span class="line"><span class="number">3.</span>利用BitMap类型构建布隆过滤器<span class="operator">*</span><span class="operator">*</span>(只保证MySQL数据库没有这个数据, 不保证一定有)<span class="operator">*</span><span class="operator">*</span></span><br></pre></td></tr></table></figure>

<h3 id="6-什么是缓存击穿-如何解决"><a href="#6-什么是缓存击穿-如何解决" class="headerlink" title="6.什么是缓存击穿,如何解决"></a>6.什么是缓存击穿,如何解决</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">现象：</span><br><span class="line">有一个Key，经常需要高并发的访问，这个Key有过期时间的，一旦达到过期时间<span class="operator">=</span><span class="operator">=</span>，这个Key被删除，所有高并发落到了MySQL中，被击穿了</span><br><span class="line"></span><br><span class="line">解决</span><br><span class="line"><span class="number">1.</span>资源充足的情况下，设置永不过期</span><br><span class="line"><span class="number">2.</span>对这个Key做一个互斥锁，只允许一个请求去读取，其他的所有请求先阻塞掉</span><br><span class="line">	第一个请求redis中没有读取到，读了MySQL，再将这个数据放到Redis中</span><br><span class="line">	释放所有阻塞的请求</span><br></pre></td></tr></table></figure>

<h3 id="7-什么是缓存雪崩-如何解决"><a href="#7-什么是缓存雪崩-如何解决" class="headerlink" title="7.什么是缓存雪崩 ,如何解决"></a>7.什么是缓存雪崩 ,如何解决</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">现象：</span><br><span class="line">大量的Key在同一个时间段过期，大量的Key的请求在Redis中都没有，都去请求MySQL，导致MySQL奔溃</span><br><span class="line"></span><br><span class="line">解决</span><br><span class="line"><span class="number">1.</span>资源充足允许的情况下，设置大部分的Key不过期</span><br><span class="line"><span class="number">2.</span>给所有Key设置过期时间时加上随机值，让Key不再同一时间过期</span><br></pre></td></tr></table></figure>

<h3 id="8-Redis中的Key如何设计"><a href="#8-Redis中的Key如何设计" class="headerlink" title="8.Redis中的Key如何设计?"></a>8.Redis中的Key如何设计?</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>使用统一的命名规范</span><br><span class="line"><span class="number">2.</span>一般使用业务名(或数据库名)为前缀，用冒号分隔，例如，业务名:表名:id。</span><br><span class="line">例如：shop:usr:msg_code（电商:用户:验证码）</span><br><span class="line"><span class="number">4.</span>控制key名称的长度，不要使用过长的key</span><br><span class="line"><span class="number">5.</span>在保证语义清晰的情况下，尽量减少Key的长度。有些常用单词可使用缩写，例如，<span class="keyword">user</span>缩写为u，messages缩写为msg</span><br><span class="line"><span class="number">6.</span>名称中不要包含特殊字符、包含空格、单双引号以及其他转义字符</span><br></pre></td></tr></table></figure>

<h3 id="9-为什么Redis是单线程的"><a href="#9-为什么Redis是单线程的" class="headerlink" title="9.为什么Redis是单线程的?"></a>9.为什么Redis是单线程的?</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>因为Redis是基于内存的操作，CPU不是Redis的瓶颈</span><br><span class="line"><span class="number">2.</span>Redis的瓶颈最有可能是机器内存的大小或者网络带宽</span><br><span class="line"><span class="number">3.</span>单线程容易实现，而且CPU不会成为瓶颈，所以没必要使用多线程增加复杂度</span><br><span class="line"><span class="number">4.</span>可以使用多Redis压榨CPU，提高性能</span><br></pre></td></tr></table></figure>

<h3 id="10-为什么Redis的性能很高"><a href="#10-为什么Redis的性能很高" class="headerlink" title="10.为什么Redis的性能很高?"></a>10.为什么Redis的性能很高?</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>基于内存操作, 快</span><br><span class="line"><span class="number">2.</span>用C语言编写, 数据结构简单, 对数据操作也简单</span><br><span class="line"><span class="number">3.</span>采用单线程, 避免不必要的线程切换和资源抢占</span><br><span class="line"><span class="number">4.</span>IO多路复用模型, 非阻塞IO</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">惊羽</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jface001.github.io/2021/01/07/Redis常见面试题/">https://jface001.github.io/2021/01/07/Redis常见面试题/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SAw 4.0</a> 许可协议。转载请注明来自 <a href="https://jface001.github.io">惊羽的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Redis/">Redis</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/02/13/%E7%89%9B%E5%AE%A2%E7%BD%91SQL%E7%BB%83%E4%B9%A0%E6%80%BB%E7%BB%93/"><i class="fa fa-chevron-left">  </i><span>牛客网SQL练习总结</span></a></div><div class="next-post pull-right"><a href="/2020/11/06/WordCount%E6%A1%88%E4%BE%8B%E6%B1%87%E6%80%BB/"><span>WordCount案例汇总</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'fd4471bb76ba37363dfe',
  clientSecret: '945ad45c695de45f4f9ee79068049e1f6ccf5f04',
  repo: 'GitalkRepo',
  owner: 'Jface001',
  admin: 'Jface001',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/img/post/code.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2022 By 惊羽</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>